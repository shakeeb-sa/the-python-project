<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domain Uniqueness Checker</title>
    
    <!-- This is no longer needed as the logic is in Python -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script> -->
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Use url_for to link CSS correctly in Flask -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header class="header">
    <nav class="navbar">
        <a href="#" class="logo">
            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.142 2.999a1 1 0 01.894.553l4.286 8.572a1 1 0 01-.894 1.447h-1.86a8 8 0 11-12.857 0H3.858a1 1 0 01-.894-1.447l4.286-8.572a1 1 0 01.894-.553h7.996zM12 18a6 6 0 100-12 6 6 0 000 12zm-2.06-5.22a1 1 0 011.415 0L12 13.414l.646-.646a1 1 0 011.415 1.414l-1.354 1.354a1 1 0 01-1.414 0l-2-2a1 1 0 010-1.414z"/>
            </svg>
            <span class="logo-text">DomainChecker</span>
        </a>
        <button class="theme-switcher" id="theme-toggle" aria-label="Toggle dark mode">
            <i class="fas fa-sun"></i>
            <i class="fas fa-moon"></i>
        </button>
    </nav>
</header>

<main>
    <div class="container">
        <h1>Domain Uniqueness Checker</h1>
        <p>Find new link-building opportunities by filtering out domains you already have.</p>

        <!-- ADDED a form tag with multipart/form-data for file uploads -->
        <form id="upload-form" method="POST" enctype="multipart/form-data">
            <div class="upload-section">
                <label for="existing-file">1. Upload Existing Links File (.xlsx)</label>
                <!-- ADDED name attribute -->
                <input type="file" id="existing-file" name="existing_file" accept=".xlsx" required>
            </div>

            <div class="upload-section">
                <label for="prospect-file">2. Upload Prospect Links File (.xlsx)</label>
                <!-- ADDED name attribute -->
                <input type="file" id="prospect-file" name="prospect_file" accept=".xlsx" required>
            </div>

            <button id="process-btn" type="submit" disabled>Process and Find Unique URLs</button>

            <div id="status"></div>
        </form>
    </div>
</main>

<footer class="footer">
    <div class="social-links">
        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
        <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
    </div>
    <p>&copy; 2024 DomainChecker. All Rights Reserved.</p>
</footer>

<!-- Simplified client-side script for UI interaction only -->
<script>
    // --- Theme Switcher (No changes needed) ---
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;
    const applyTheme = (theme) => {
        body.setAttribute('data-theme', theme === 'dark' ? 'dark' : '');
    };
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) applyTheme(savedTheme);
    themeToggle.addEventListener('click', () => {
        let newTheme = body.hasAttribute('data-theme') ? 'light' : 'dark';
        applyTheme(newTheme);
        localStorage.setItem('theme', newTheme);
    });

    // --- Form UI Logic (Simplified) ---
    const existingFileInput = document.getElementById('existing-file');
    const prospectFileInput = document.getElementById('prospect-file');
    const processBtn = document.getElementById('process-btn');
    const statusDiv = document.getElementById('status');
    const uploadForm = document.getElementById('upload-form');

    function checkFiles() {
        // Enable the button only if both files are selected
        processBtn.disabled = !(existingFileInput.files.length > 0 && prospectFileInput.files.length > 0);
    }

    existingFileInput.addEventListener('change', checkFiles);
    prospectFileInput.addEventListener('change', checkFiles);
    
    // Provide feedback when the form is submitted
    uploadForm.addEventListener('submit', () => {
        if (!processBtn.disabled) {
            processBtn.disabled = true;
            statusDiv.textContent = 'Processing your files on the server... Please wait.';
            statusDiv.className = '';
        }
    });
</script>
</body>
</html>
